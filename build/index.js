!function(){var e={669:function(e,t,n){e.exports=n(609)},448:function(e,t,n){"use strict";var r=n(867),a=n(26),o=n(372),s=n(327),i=n(97),l=n(109),c=n(985),u=n(61),d=n(655),p=n(263);e.exports=function(e){return new Promise((function(t,n){var f,g=e.data,m=e.headers,h=e.responseType;function E(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(g)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(v+":"+w)}var b=i(e.baseURL,e.url);function x(){if(y){var r="getAllResponseHeaders"in y?l(y.getAllResponseHeaders()):null,o={data:h&&"text"!==h&&"json"!==h?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};a((function(e){t(e),E()}),(function(e){n(e),E()}),o),y=null}}if(y.open(e.method.toUpperCase(),s(b,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(x)},y.onabort=function(){y&&(n(u("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(u("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var C=(e.withCredentials||c(b))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;C&&(m[e.xsrfHeaderName]=C)}"setRequestHeader"in y&&r.forEach(m,(function(e,t){void 0===g&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),h&&"json"!==h&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){y&&(n(!e||e&&e.type?new p("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),g||(g=null),y.send(g)}))}},609:function(e,t,n){"use strict";var r=n(867),a=n(849),o=n(321),s=n(185),i=function e(t){var n=new o(t),i=a(o.prototype.request,n);return r.extend(i,o.prototype,n),r.extend(i,n),i.create=function(n){return e(s(t,n))},i}(n(655));i.Axios=o,i.Cancel=n(263),i.CancelToken=n(972),i.isCancel=n(502),i.VERSION=n(288).version,i.all=function(e){return Promise.all(e)},i.spread=n(713),i.isAxiosError=n(268),e.exports=i,e.exports.default=i},263:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:function(e,t,n){"use strict";var r=n(263);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:function(e,t,n){"use strict";var r=n(867),a=n(327),o=n(782),s=n(572),i=n(185),l=n(875),c=l.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=i(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!a){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(u),o=Promise.resolve(t);d.length;)o=o.then(d.shift(),d.shift());return o}for(var p=t;r.length;){var f=r.shift(),g=r.shift();try{p=f(p)}catch(e){g(e);break}}try{o=s(p)}catch(e){return Promise.reject(e)}for(;u.length;)o=o.then(u.shift(),u.shift());return o},u.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=i(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(i(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(i(r||{},{method:e,url:t,data:n}))}})),e.exports=u},782:function(e,t,n){"use strict";var r=n(867);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},97:function(e,t,n){"use strict";var r=n(793),a=n(303);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},61:function(e,t,n){"use strict";var r=n(481);e.exports=function(e,t,n,a,o){var s=new Error(e);return r(s,t,n,a,o)}},572:function(e,t,n){"use strict";var r=n(867),a=n(527),o=n(502),s=n(655),i=n(263);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new i("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return l(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:function(e){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},185:function(e,t,n){"use strict";var r=n(867);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function l(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,a=t(e);r.isUndefined(a)&&t!==l||(n[e]=a)})),n}},26:function(e,t,n){"use strict";var r=n(61);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},527:function(e,t,n){"use strict";var r=n(867),a=n(655);e.exports=function(e,t,n){var o=this||a;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},655:function(e,t,n){"use strict";var r=n(867),a=n(16),o=n(481),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(448)),l),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(i(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(s)})),e.exports=c},288:function(e){e.exports={version:"0.25.0"}},849:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},327:function(e,t,n){"use strict";var r=n(867);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))})))})),o=s.join("&")}if(o){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},303:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:function(e,t,n){"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,o,s){var i=[];i.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),r.isString(a)&&i.push("path="+a),r.isString(o)&&i.push("domain="+o),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},268:function(e,t,n){"use strict";var r=n(867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},985:function(e,t,n){"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16:function(e,t,n){"use strict";var r=n(867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},109:function(e,t,n){"use strict";var r=n(867),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},713:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},875:function(e,t,n){"use strict";var r=n(288).version,a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],s=t[o];if(s){var i=e[o],l=void 0===i||s(i,o,e);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:a}},867:function(e,t,n){"use strict";var r=n(849),a=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function i(e){return"[object ArrayBuffer]"===a.call(e)}function l(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===a.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:o,isArrayBuffer:i,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===a.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&i(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return l(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===a.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.React,r=window.ReactDOM,a=n.n(r),o=window.wp.plugins,s=window.wp.editPost,i=window.wp.components,l=n(669),c=n.n(l),u=window.lodash,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,u.has)(window,`UBB.${e}`)?(0,u.get)(window.UBB,e):t};c().interceptors.response.use((e=>(window.wpApiSettings.nonce=(0,u.has)(e,"headers.x-wp-nonce")?e.headers["x-wp-nonce"]:window.wpApiSettings.nonce,e)));const p=async e=>{if(!1===d("api_root",!1))throw new Error("No root available.");const t={baseURL:d("api_root"),headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings.nonce||0}};return c()((0,u.merge)(t,e))},f=async(e,t)=>await p({method:"patch",url:`/edit/post/${e}/translation/${t}/link`});function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const m=(0,t.createContext)({currentLang:"",postId:"",languages:[],translations:[],translatedLangs:[],untranslatedLangs:[],refetchLangs:()=>{}}),h=t=>n=>(0,e.createElement)(m.Consumer,null,(r=>(0,e.createElement)(t,g({},n,r))));var E=m,y=h((n=>{let{untranslatedLangs:r,postId:a,languagesInfo:o,refetchLangs:s}=n;const[l,c]=(0,t.useState)(r[0]),[u,f]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),{mutate:h,data:E,isLoading:y,isError:v}=((e,n)=>{const[r,a]=(0,t.useState)(),[o,s]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1);return{mutate:async()=>{return s(!0),(t=e,r=n,p({method:"post",url:`/edit/post/${t}/translation/${r}/copy`})).then((e=>a(e))).catch((()=>l(!0))).then((()=>s(!1)));var t,r},data:r,isLoading:o,isError:i}})(a,l),w=new URLSearchParams({ubb_source:a,lang:l}),b=`${d("admin_url","")}/post-new.php?${w.toString()}`,x=()=>m(!1),C=()=>h().then((()=>s())),S=r.map((e=>({label:`${o[e].native_name} (${e})`,value:e}))),L=wp?.data?.select("core/editor").isEditedPostDirty()||!1;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.Flex,{direction:"column",style:{width:"100%"}},(0,e.createElement)(i.SelectControl,{label:"Create Translations",onChange:e=>c(e),value:l,options:S}),(0,e.createElement)(i.CheckboxControl,{label:"Copy content",help:"When creating the translation, copy the content of this post.",checked:u,onChange:()=>f((e=>!e))}),(0,e.createElement)(i.Flex,{justify:"end"},(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{u?L?m(!0):C():window.location.href=b}},"Create")),v&&"ERROR!!!!",E&&JSON.stringify(E)),g&&(0,e.createElement)(i.Modal,{title:"Unsaved changes",onRequestClose:x},(0,e.createElement)("p",null,"The current post has unsaved changes."),(0,e.createElement)("p",null,"Copying with unsaved changes will not copy those changes to the new translation post."),(0,e.createElement)("div",{style:{display:"flex",justifyContent:"end",gap:"10px",paddingTop:"20px"}},(0,e.createElement)(i.Button,{variant:"secondary",onClick:x},"Cancel"),(0,e.createElement)(i.Button,{variant:"primary",onClick:C},"Copy"))))})),v=h((n=>{let{postLanguage:r,currentLang:a,languages:o,languagesInfo:s,translatedLangs:l,refetchLangs:c,postId:u}=n;const[d,f]=(0,t.useState)(!1),[g,m]=(0,t.useState)(null!==r&&o.includes(r)?r:null),{mutate:h,isLoading:E,isError:y}=(e=>{const[n,r]=(0,t.useState)(!1),[a,o]=(0,t.useState)(!1);return{mutate:async t=>(r(!0),((e,t)=>p({method:"patch",url:`/edit/post/${e}/language/${t}`}))(e,t).catch((()=>o(!0))).then((()=>r(!1)))),isLoading:n,isError:a}})(u),v=()=>f(!1);if(E)return"Loading...";let w=o.map((e=>({label:`${s[e].native_name} (${e})`,value:e,disabled:(null===r||e!==r)&&void 0!==l.find((t=>t.language===e))}))),b=null,x=!1;return null===r?(w=[{label:"Select a language",value:"",disabled:!1},...w],b="Select a language"):o.includes(r)||(w=[{label:"Select a language",value:"",disabled:!1},...w],b=`Unknown language ${r}`,x=!0),null===b&&(b=`${s[r].native_name} (${r})`),(0,e.createElement)(i.PanelRow,null,!d&&(0,e.createElement)("div",{style:{display:"grid",justifyContent:"space-between",width:"100%"}},(0,e.createElement)("span",{style:{gridColumn:"1/2"}},x&&(0,e.createElement)("span",{style:{marginRight:"4px"}},(0,e.createElement)(i.Tooltip,{text:"This language is not set in the Unbabble options. Please select a correct language.",delay:"500"},(0,e.createElement)("span",{className:"dashicons dashicons-warning",style:{color:"FireBrick"}}))),b),(0,e.createElement)(i.Button,{style:{gridColumn:"2/2"},variant:"link",onClick:()=>f(!0)},"Edit")),d&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.FlexItem,{isBlock:!0},(0,e.createElement)(i.Flex,{direction:"column",align:"stretch"},(0,e.createElement)(i.SelectControl,{style:{width:"100%"},value:null===g?"":g,options:w,onChange:e=>m(e),__nextHasNoMarginBottom:!0}),(0,e.createElement)(i.Flex,{gap:"2",justify:"end"},(0,e.createElement)(i.Button,{style:{boxSizing:"border-box"},variant:"tertiary",onClick:v},"Cancel"),(0,e.createElement)(i.Button,{style:{boxSizing:"border-box"},variant:"primary",onClick:()=>{g!==r?h(g).then((()=>c())):v()}},"Save"))))))}));const w=t=>{let{translation:n,isDuplicate:r,languagesInfo:a}=t;const o=`${a[n.language].native_name} (${n.language})`;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{style:{gridColumn:"1/2"}},(0,e.createElement)("span",null,o),r&&(0,e.createElement)("span",{style:{marginLeft:"4px"}},(0,e.createElement)(i.Tooltip,{text:"Another post with the same language already exists in the translation group.",delay:"500"},(0,e.createElement)("span",{className:"dashicons dashicons-warning",style:{color:"FireBrick"}})))),(0,e.createElement)("span",{style:{gridColumn:"2/2",gap:"10px",display:"flex"}},(0,e.createElement)("a",{href:n.edit},"Edit"),(0,e.createElement)("a",{href:n.view},"View")))};var b=h((t=>{let{currentLang:n,translatedLangs:r,postId:a,languagesInfo:o}=t;return(0,e.createElement)(i.PanelRow,{style:{flexDirection:"column"}},(0,e.createElement)(i.Flex,{direction:"column",style:{width:"100%"}},(0,e.createElement)("span",{style:{textTransform:"uppercase",fontSize:11,fontWeight:500}},"translations"),r.length>0&&r.map((t=>(0,e.createElement)("div",{key:`ubb-link-translation-${t.language}`,style:{display:"grid",marginBottom:4,justifyContent:"space-between"}},(0,e.createElement)(w,{translation:t,postId:a,isDuplicate:n===t.language||0!==r.filter((e=>{let{ID:n,language:r}=e;return t.language===r&&t.ID!==n})).length,languagesInfo:o})))),0===r.length&&(0,e.createElement)("p",null,"No translations available.")))})),x=h((n=>{let{postId:r,refetchLangs:a}=n;const{mutate:o,isLoading:s}=(e=>{const[n,r]=(0,t.useState)(),[a,o]=(0,t.useState)(!1),[s,i]=(0,t.useState)(!1);return{mutate:()=>{return o(!0),(t=e,p({method:"patch",url:`/edit/post/${t}/translation/unlink`})).then((e=>r(e))).catch((()=>i(!0))).then((()=>o(!1)));var t},data:n,isLoading:a,isError:s}})(r),[l,c]=(0,t.useState)(!1),u=()=>c(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.Button,{style:{boxSizing:"border-box"},variant:"secondary",isDestructive:!0,onClick:()=>c(!0),disabled:s},"Unlink from translations"),l&&(0,e.createElement)(i.Modal,{title:"Unlink from translations",onRequestClose:u},(0,e.createElement)("p",null,"Unlinking will detach this post from all of its translations."),(0,e.createElement)("p",null,"The rest of the translations will continue linked to each other."),(0,e.createElement)("div",{style:{display:"flex",justifyContent:"end",gap:"10px",paddingTop:"20px"}},(0,e.createElement)(i.Button,{variant:"secondary",onClick:u},"Cancel"),(0,e.createElement)(i.Button,{variant:"primary",isDestructive:!0,onClick:()=>o().then((()=>a()))},"Unlink"))))})),C=t=>{let{children:n,title:r}=t;return(0,e.createElement)("details",null,(0,e.createElement)("summary",null,r),(0,e.createElement)("div",{className:"components-panel__row",style:{marginTop:"1em"}},n))};const S=n=>{let{postId:r,refetchLangs:a,posts:o,source:s}=n;const{mutate:l,isLoading:c,isSuccess:u,isError:d}=((e,n)=>{const[r,a]=(0,t.useState)(!1),[o,s]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1);return{mutate:()=>(a(!0),s(!1),f(e,n).then((()=>s(!0))).catch((()=>l(!0))).then((()=>a(!1)))),isSuccess:o,isLoading:r,isError:i}})(r,s),p=o[0];return(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",border:"1px solid #e0e0e0",padding:"8px"}},(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(1, 1fr)",alignContent:"center"}},1===o.length&&(0,e.createElement)("summary",null,"("+p.lang+") "+p.title),o.length>1&&(0,e.createElement)(C,{title:"("+p.lang+") "+p.title},(0,e.createElement)("div",{style:{display:"flex",flexWrap:"wrap",marginLeft:20}},(0,e.createElement)("h4",{style:{marginTop:0}},"Other translations in the group:"),o.slice(1).map((t=>{let{title:n,ID:r,lang:a}=t;return(0,e.createElement)("div",{style:{width:"100%",justifyContent:"space-between"}},(0,e.createElement)("span",null,"(",a,") "),(0,e.createElement)("span",null,n," "))}))))),(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>l().then((()=>a())),disabled:c||u,style:{height:"min-content",margin:"auto 0 auto 32px"}},!u&&"Link",u&&"Linked"))};var L=h((n=>{let{postId:r,refetchLangs:a}=n;const[o,s]=(0,t.useState)(!1),{data:l,refetch:c,isLoading:u,isError:d}=((e,n)=>{const[r,a]=(0,t.useState)(),[o,s]=(0,t.useState)(!0),[i,l]=(0,t.useState)(!1),c=async t=>(s(!0),((e,t)=>p({url:`/edit/post/${e}/translation/link?page=${t}`}))(e,t).then((e=>{let{data:t}=e;return a(t)})).catch((()=>l(!0))).then((()=>s(!1))));return(0,t.useEffect)((()=>{c(n)}),[e,n]),{data:r,refetch:c,isLoading:o,isError:i}})(r,1),[f,m]=(0,t.useState)(1),[h,E]=(0,t.useState)(l?.pages||1);return u||h===(l?.pages||1)||E(l?.pages||1),(0,e.createElement)(e.Fragment,null,o&&(0,e.createElement)(i.Modal,{title:"Link to existing posts:",onRequestClose:()=>s(!1)},(0,e.createElement)("div",{style:{display:"grid",flexWrap:"wrap",padding:"20px",gap:"8px"}},(0,e.createElement)(i.Notice,{status:"warning",isDismissible:!1,politeness:"polite"}," ","You will unlink from the post's current translations if you link to another."),u&&"Loading...",d&&"ERROR!!!",!u&&l?.options&&l.options.map((t=>(0,e.createElement)(S,g({},t,{postId:r,refetchLangs:a}))))),(0,e.createElement)("div",{style:{display:"flex",width:"100%",paddingLeft:"20px"}},f>1&&(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{f<=1||(m(f-1),c(f-1))}},"Previous Page"),(0,e.createElement)("b",{style:{padding:"10px"}},f),f<h&&(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{f>=h||(m(f+1),c(f+1))}},"Next Page"))),(0,e.createElement)(i.Button,{style:{boxSizing:"border-box"},variant:"secondary",onClick:()=>s(!0)},"Link translations"))}));let k=new URLSearchParams(window.location.search).get("ubb_source"),R=null;var B=()=>{var n,r;const a=null!==(n=wp?.data?.select("core/editor")?.getCurrentPostId())&&void 0!==n?n:((e,t)=>{const n=new URLSearchParams(window.location.search);return n.has(e)?n.get(e):void 0})("post"),{data:o,refetch:s,isLoading:i,isError:l,setIsLoading:c,setIsError:u}=(e=>{const[n,r]=(0,t.useState)(),[a,o]=(0,t.useState)(!0),[s,i]=(0,t.useState)(!1),l=()=>{return isNaN(e)?(o(!1),i(!1),void r([])):(o(!0),i(!1),(t=e,p({url:`/edit/post/${t}`})).then((e=>{let{data:t}=e;return r(t)})).catch((()=>i(!0))).then((()=>o(!1))));var t};return(0,t.useEffect)((()=>{l()}),[]),{data:{...n,postId:e},refetch:l,isLoading:a,isError:s,setIsLoading:o,setIsError:i}})(a);if((0,t.useEffect)((()=>{if(void 0!==a&&k)return R=wp.data.subscribe((()=>{if(!k)return;const e=wp.data.select("core/editor").didPostSaveRequestSucceed(),t=wp.data.select("core/editor").isEditedPostNew();e&&!t&&(c(!0),f(wp.data.select("core/editor").getCurrentPostId(),k).then((()=>{s()})).catch((()=>{u(!0)})).then((()=>{c(!1)})),k=null,R())})),R}),[]),i)return"Loading...";if(l)return"Error fetching post language data.";if(null!==(r=wp?.data?.select("core/editor")?.isEditedPostNew())&&void 0!==r&&r||!o||!o.translations){const t=new URL(window.location.href).searchParams.get("ubb_source"),n=d("source_title",""),r=d("source_edit_url","");return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("input",{hidden:!0,readOnly:!0,id:"ubb_lang",name:"ubb_lang",value:d("current_lang","")}),(0,e.createElement)("span",null,"Post has no language data."),t&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("br",null),(0,e.createElement)("br",null),(0,e.createElement)("span",null,'Post is being linked as a translation to post "',(0,e.createElement)("a",{href:r,target:"_blank"},n),'".')))}const{language:g,translations:m}=o,h=d("current_lang",""),w=d("languages",{}),C=d("languagesInfo",{}),S=w.filter((e=>(null===g||e!==g)&&!m.map((e=>e.language)).includes(e))),B=null!==g&&!w.includes(g);return(0,e.createElement)(E.Provider,{value:{currentLang:h,postId:o.postId,postLanguage:o.language,languages:w,languagesInfo:C,translatedLangs:m,untranslatedLangs:S,refetchLangs:s}},(0,e.createElement)(v,null),(0,e.createElement)(b,null),!B&&S.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("hr",null),(0,e.createElement)(y,null)),!B&&m.length<1&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("hr",null),(0,e.createElement)("p",{style:{textTransform:"uppercase",fontSize:11,fontWeight:500}},"linking"),(0,e.createElement)("p",null,"This post currently has no translation group. You can link it to existing posts in other languages."),(0,e.createElement)(L,null)),m.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("hr",null),(0,e.createElement)("p",{style:{textTransform:"uppercase",fontSize:11,fontWeight:500}},"linking"),(0,e.createElement)("p",null,"This post is currently in a translation group. If you wish to change, you must first unlink from the current group."),(0,e.createElement)(x,null)))},T=t=>{let{isClassic:n=!1}=t;return(0,e.createElement)(e.Fragment,null,!n&&(0,e.createElement)(s.PluginDocumentSettingPanel,{name:"ubb-lang-panel",title:"Language"},(0,e.createElement)(B,null)),n&&(0,e.createElement)(B,null))},P=window.wp.primitives,j=(0,e.createElement)(P.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(P.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})),N=(0,e.createElement)(P.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(P.Path,{d:"M3.99961 13C4.67043 13.3354 4.6703 13.3357 4.67017 13.3359L4.67298 13.3305C4.67621 13.3242 4.68184 13.3135 4.68988 13.2985C4.70595 13.2686 4.7316 13.2218 4.76695 13.1608C4.8377 13.0385 4.94692 12.8592 5.09541 12.6419C5.39312 12.2062 5.84436 11.624 6.45435 11.0431C7.67308 9.88241 9.49719 8.75 11.9996 8.75C14.502 8.75 16.3261 9.88241 17.5449 11.0431C18.1549 11.624 18.6061 12.2062 18.9038 12.6419C19.0523 12.8592 19.1615 13.0385 19.2323 13.1608C19.2676 13.2218 19.2933 13.2686 19.3093 13.2985C19.3174 13.3135 19.323 13.3242 19.3262 13.3305L19.3291 13.3359C19.3289 13.3357 19.3288 13.3354 19.9996 13C20.6704 12.6646 20.6703 12.6643 20.6701 12.664L20.6697 12.6632L20.6688 12.6614L20.6662 12.6563L20.6583 12.6408C20.6517 12.6282 20.6427 12.6108 20.631 12.5892C20.6078 12.5459 20.5744 12.4852 20.5306 12.4096C20.4432 12.2584 20.3141 12.0471 20.1423 11.7956C19.7994 11.2938 19.2819 10.626 18.5794 9.9569C17.1731 8.61759 14.9972 7.25 11.9996 7.25C9.00203 7.25 6.82614 8.61759 5.41987 9.9569C4.71736 10.626 4.19984 11.2938 3.85694 11.7956C3.68511 12.0471 3.55605 12.2584 3.4686 12.4096C3.42484 12.4852 3.39142 12.5459 3.36818 12.5892C3.35656 12.6108 3.34748 12.6282 3.34092 12.6408L3.33297 12.6563L3.33041 12.6614L3.32948 12.6632L3.32911 12.664C3.32894 12.6643 3.32879 12.6646 3.99961 13ZM11.9996 16C13.9326 16 15.4996 14.433 15.4996 12.5C15.4996 10.567 13.9326 9 11.9996 9C10.0666 9 8.49961 10.567 8.49961 12.5C8.49961 14.433 10.0666 16 11.9996 16Z"})),O=(0,e.createElement)(P.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(P.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),_=(0,e.createElement)(P.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(P.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"}));const A=n=>{let{languages:r,setLanguages:a,defaultLanguage:o,setDefaultLanguage:s}=n;const[l,c]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!1),[f,g]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),E=()=>{p(!1),h("")},y=e=>{const t=r.concat(),n=t.find((t=>t.language===e));t.find((t=>t.language===e)).hidden=!n.hidden,a(t)};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{display:"grid",flexWrap:"wrap",paddingBottom:"20px",gap:"8px"}},(0,e.createElement)(i.Flex,{direction:"row"},(0,e.createElement)("div",null,(0,e.createElement)("div",{style:{display:"grid",flexWrap:"wrap",gap:"8px",maxHeight:"312px",overflow:"scroll",padding:"20px",background:"white",border:"2px solid #ccc",borderRadius:"5px"}},(0,e.createElement)("table",null,(0,e.createElement)("tbody",null,r.length>0&&r.sort(((e,t)=>e.language===o?-1:t.language===o?1:0)).map((t=>{let{language:n,hidden:a}=t;const l=d("wpLanguages",[]).find((e=>e.code===n))?.label,c=n===o;return(0,e.createElement)("tr",{key:n},(0,e.createElement)("td",null,l),(0,e.createElement)("td",{style:{paddingLeft:"20px",color:"#888"}},c&&(0,e.createElement)("p",{style:{margin:0}},"Default language")),(0,e.createElement)("td",{style:{paddingLeft:"20px"}},a&&(0,e.createElement)("p",{style:{color:"rgb(230, 74, 74)"}},"Hidden")),(0,e.createElement)("td",{style:{paddingLeft:"20px"}},c&&(0,e.createElement)(i.Button,{icon:j,style:{padding:6,fill:"#d5d5d5"},disabled:!0}),!c&&(0,e.createElement)(i.DropdownMenu,{icon:j},(t=>{let{onClose:o}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.MenuGroup,null,(0,e.createElement)(i.MenuItem,{icon:N,onClick:()=>y(n)},a?"Show":"Hide"),(0,e.createElement)(i.MenuItem,{icon:O,onClick:()=>{var e;s(e=n),r.find((t=>{let{language:n}=t;return n===e})).hidden&&y(e),o()}},"Set as default")),(0,e.createElement)(i.MenuGroup,null,(0,e.createElement)(i.MenuItem,{icon:_,onClick:()=>{(e=>{p(!0),h(e)})(n),o()}},"Remove")))}))))})))))),(0,e.createElement)("div",{style:{display:"grid",gap:8,alignSelf:"baseline"}},(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{c(!0),g("")}},"Add language")),l&&(0,e.createElement)(i.Modal,{title:"Add new Language",onRequestClose:()=>{c(!1),g("")}},(0,e.createElement)(i.SelectControl,{value:f,onChange:e=>{g(e)}},(0,e.createElement)("option",{value:""},"Select a language:"),d("wpLanguages",[]).filter((e=>!r.includes(e.code))).map((t=>(0,e.createElement)("option",{value:t.code,key:t.code},t.label)))),f&&(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{a(r.concat([{language:f,hidden:!1}])),c(!1),g("")}},"Add Selected Language")),u&&m&&(0,e.createElement)(i.Modal,{title:"Removing Language",onRequestClose:E},(0,e.createElement)("p",null,"Are you sure you want to remove"," ",(0,e.createElement)("b",null,d("wpLanguages",[]).find((e=>e.code===m))?.label),"?"),(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{a(r.filter((e=>e.language!==m))),p(!1),h("")}},"Remove"),(0,e.createElement)(i.Button,{variant:"secondary",onClick:E},"Cancel")))))};var U=t=>{let{languages:n,setLanguages:r,defaultLanguage:a,setDefaultLanguage:o}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Languages"),(0,e.createElement)(i.Flex,{direction:"row",style:{width:"100%",justifyContent:"normal"}},(0,e.createElement)(A,{languages:n,setLanguages:r,defaultLanguage:a,setDefaultLanguage:o})))},F=t=>{let{languages:n,defaultLanguage:r,routing:a,setRouting:o}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,"Routing"),(0,e.createElement)(i.Flex,{direction:"column",style:{width:"fit-content",marginBottom:24}},(0,e.createElement)(i.SelectControl,{value:a.router,onChange:e=>{var t;t=e,o({...a,router:t})},label:"Routing type",__nextHasNoMarginBottom:!0},(0,e.createElement)("option",{value:"directory"},"Directory"),(0,e.createElement)("option",{value:"query_var"},"Query Var")),"directory"===a.router&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h4",null,"Directory settings"),(0,e.createElement)("div",{style:{display:"grid",flexWrap:"wrap",gap:"8px",maxHeight:"312px",overflow:"scroll",padding:"20px",background:"white",border:"2px solid #ccc",borderRadius:"5px"}},n.map((t=>{var n;let{language:s}=t;const l=d("wpLanguages",[]).find((e=>e.code===s))?.label,c=s===r;return(0,e.createElement)(i.Flex,{direction:"row",style:{justifyContent:"end",gap:32},key:s},(0,e.createElement)("div",null,l),(0,e.createElement)(i.TextControl,{value:c?"N/A":null!==(n=a.router_options.directories[s])&&void 0!==n?n:"",onChange:e=>((e,t)=>{o({...a,router_options:{...a.router_options,directories:{...a.router_options.directories,[e]:t}}})})(s,e),placeholder:c?"N/A":s,disabled:c,__nextHasNoMarginBottom:!0}))}))))))},I=n=>{let{title:r,types:a,setTypes:o,allTypes:s,addLabel:l,selectLabel:c,addSelectedLabel:u}=n;const[d,p]=(0,t.useState)(!1),[f,g]=(0,t.useState)(!1),[m,h]=(0,t.useState)(""),[E,y]=(0,t.useState)(""),v=()=>{g(!1),y("")};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h3",null,r),(0,e.createElement)(i.Flex,{direction:"row",style:{width:"100%",justifyContent:"normal"}},(0,e.createElement)("div",{style:{display:"grid",flexWrap:"wrap",gap:"8px",maxHeight:"472px",overflow:"scroll",padding:"20px",background:"white",border:"2px solid #ccc",borderRadius:"5px"}},a.map((t=>(0,e.createElement)(i.Flex,{direction:"row",style:{gap:32},key:t},(0,e.createElement)("span",null,t),(0,e.createElement)(i.Button,{variant:"tertiary",onClick:()=>(e=>{g(!0),y(e)})(t),isSmall:!0,isDestructive:!0},"Remove")))),0===a.length&&(0,e.createElement)("span",null,"None selected.")),(0,e.createElement)("div",{style:{display:"grid",gap:8,alignSelf:"baseline"}},(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{p(!0),h("")}},l)),d&&(0,e.createElement)(i.Modal,{title:l,onRequestClose:()=>{p(!1),h("")}},(0,e.createElement)(i.SelectControl,{value:m,onChange:e=>{h(e)}},(0,e.createElement)("option",{value:""},c),s.filter((e=>!a.includes(e))).map((t=>(0,e.createElement)("option",{value:t,key:t},t)))),m&&(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{o(a.concat([m])),p(!1)}},u)),f&&E&&(0,e.createElement)(i.Modal,{title:"Removing Language",onRequestClose:v},(0,e.createElement)("p",null,"Are you sure you want to remove"," ",(0,e.createElement)("b",null,E),"?"),(0,e.createElement)(i.Button,{variant:"secondary",onClick:()=>{o(a.filter((e=>e!==E))),y("")}},"Remove"),(0,e.createElement)(i.Button,{variant:"secondary",onClick:v},"Cancel"))))},D=n=>{let{}=n;const[r,a]=(0,t.useState)(d("options",[])?.allowed_languages.map((e=>({language:e,hidden:d("options",[])?.hidden_languages?.includes(e)})))),[o,s]=(0,t.useState)(d("options",[])?.default_language),[l,c]=(0,t.useState)({router:d("options",[])?.router,router_options:d("options",[])?.router_options}),[u,f]=(0,t.useState)(d("options",[])?.post_types),[g,m]=(0,t.useState)(d("options",[])?.taxonomies),[h,E]=(0,t.useState)(null),y=()=>{var e;E(""),(e={languages:r,defaultLanguage:o,routing:l,postTypes:u,taxonomies:g},p({method:"post",url:"/options",data:e})).then((()=>E("success"))).catch((e=>E(e.response.data.errors))).then((()=>window.scrollTo(0,0)))};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("form",{action:"options.php",method:"post"},(0,e.createElement)(i.Flex,{direction:"row",style:{width:"100%",justifyContent:"normal"}},(0,e.createElement)("h1",null,"Unbabble Settings"),(0,e.createElement)(i.Button,{className:"button button-primary",onClick:y},"Save")),"success"===h&&(0,e.createElement)(i.Notice,{status:"success",onRemove:()=>E("")},"Options have been updated."),null!==h&&"object"==typeof h&&(0,e.createElement)(i.Notice,{status:"error",onRemove:()=>E("")},"An error has occured while trying to update."),(0,e.createElement)(U,{languages:r,setLanguages:a,defaultLanguage:o,setDefaultLanguage:s}),(0,e.createElement)(F,{languages:r,defaultLanguage:o,routing:l,setRouting:c}),(0,e.createElement)(I,{title:"Post Types",addLabel:"Add post type",selectLabel:"Select a post type",addSelectedLabel:"Add selected post type",types:u,setTypes:f,allTypes:d("wpPostTypes",[])}),(0,e.createElement)(I,{title:"Taxonomies",addLabel:"Add taxonomy",selectLabel:"Select a taxonomy",addSelectedLabel:"Add selected taxonomy",types:g,setTypes:m,allTypes:d("wpTaxonomies",[])}),(0,e.createElement)(i.Button,{className:"button button-primary",style:{marginTop:24},onClick:y},"Save")))};window.addEventListener("load",(()=>{const t=document.getElementById("ubb-language");t&&a().render((0,e.createElement)(T,{isClassic:!0}),t)})),(0,o.registerPlugin)("ubb-language-panel",{render:T,icon:"airplane"}),window.addEventListener("load",(()=>{const t=document.getElementById("ubb-options-page");t&&a().render((0,e.createElement)(D,null),t)}))}()}();